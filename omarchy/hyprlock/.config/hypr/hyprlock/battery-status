#!/bin/sh

# status="$(acpi -b | grep -ioh "\w*charging\w*")"
# level="$(acpi -b | grep -o -P "[0-9]+(?=%)")"

status="$(cat /sys/class/power_supply/BAT0/status)"
level="$(cat /sys/class/power_supply/BAT0/capacity)"

# Define icons (10 levels)
icons_discharging=(󰁺 󰁻 󰁼 󰁽 󰁾 󰁿 󰂀 󰂁 󰂂 󰁹)
icons_charging=(󰢜 󰂆 󰂇 󰂈 󰢝 󰂉 󰢞 󰂊 󰂋 󰂅)

# Determine index based on level (0–9)
index=$((level / 10))
if [ "$index" -gt 9 ]; then index=9; fi

case "$status" in
  "Charging")
    printf "%s\n" "${icons_charging[$index]}"
    ;;
  "Discharging")
    printf "%s\n" "${icons_discharging[$index]}"
    ;;
  "Full")
    printf "󰂅\n"
    ;;
  "Not charging"|"Unknown")
    printf "\n"
    ;;
  *)
    printf "\n"
    ;;
esac
